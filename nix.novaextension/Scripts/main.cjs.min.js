"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(){return(n=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function t(n){return n}var r=t;function e(n){return function(){return n}}var o=e(void 0);function u(n,t,r,e,o,u,i,c,f){switch(arguments.length){case 1:return n;case 2:return function(){return t(n.apply(this,arguments))};case 3:return function(){return r(t(n.apply(this,arguments)))};case 4:return function(){return e(r(t(n.apply(this,arguments))))};case 5:return function(){return o(e(r(t(n.apply(this,arguments)))))};case 6:return function(){return u(o(e(r(t(n.apply(this,arguments))))))};case 7:return function(){return i(u(o(e(r(t(n.apply(this,arguments)))))))};case 8:return function(){return c(i(u(o(e(r(t(n.apply(this,arguments))))))))};case 9:return function(){return f(c(i(u(o(e(r(t(n.apply(this,arguments)))))))))}}}function i(n,t,r,e,o,u,i,c,f,a,s,p,l,m,v,h,d,y,g,O){switch(arguments.length){case 1:return n;case 2:return t(n);case 3:return r(t(n));case 4:return e(r(t(n)));case 5:return o(e(r(t(n))));case 6:return u(o(e(r(t(n)))));case 7:return i(u(o(e(r(t(n))))));case 8:return c(i(u(o(e(r(t(n)))))));case 9:return f(c(i(u(o(e(r(t(n))))))));case 10:return a(f(c(i(u(o(e(r(t(n)))))))));case 11:return s(a(f(c(i(u(o(e(r(t(n))))))))));case 12:return p(s(a(f(c(i(u(o(e(r(t(n)))))))))));case 13:return l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))));case 14:return m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))));case 15:return v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))));case 16:return h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))));case 17:return d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))));case 18:return y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))));case 19:return g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n))))))))))))))))));case 20:return O(g(y(d(h(v(m(l(p(s(a(f(c(i(u(o(e(r(t(n)))))))))))))))))))}}var c=function(n,t){return t},f=function(n,t){for(var r=0,e=t.length,o=n.length;r<e;r++,o++)n[o]=t[r];return n},a=function(n){return"Some"===n._tag},s={_tag:"None"},p=function(n){return{_tag:"Some",value:n}},l=function(n){return"Left"===n._tag},m=function(n){return{_tag:"Left",left:n}},v=function(n){return{_tag:"Right",right:n}},h=Object.prototype.hasOwnProperty,d=function(n,t){return{left:n,right:t}};function y(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.separate)}}}function g(n,t){return function(r){var e=n.traverse(r);return function(n,o){return r.map(e(n,o),t.compact)}}}var O=m,w=v,S=function(n){return function(t){return F(t)?t:n(t.right)}},F=l,_=function(n){return"Right"===n._tag},P=function(n,t){return function(r){return F(r)?n(r.left):t(r.right)}},b=s,E=p;function N(n){return function(t){return n(t)?E(t):b}}var x=function(n){return"Left"===n._tag?b:E(n.right)},j=function(n,t){return i(n,G(t))},G=function(n){return function(t){return L(t)?b:E(n(t.value))}},M=function(n){return function(t){return L(t)?b:n(t.value)}},k=function(n){return function(t){return L(t)?n():t}},I=x,T=a,L=function(n){return"None"===n._tag},A=function(n,t){return function(r){return L(r)?n():t(r.value)}},R=function(n){return function(t){return L(t)?n():t.value}},U=function(n){return null==n?b:E(n)},K=j,C=function(){return n={concat:t},{concat:function(t,r){return L(t)?r:L(r)?t:E(n.concat(t.value,r.value))},empty:b};var n},z=function(n){var t=D(n);return function(n,r){var e=t(n);return function(t){var o,u=e(t);return"None"===u._tag?((o=new Map(t)).set(n,r),o):u.value[1]!==r?((o=new Map(t)).set(u.value[0],r),o):t}}};function D(n){return function(t,r){if(void 0===r){var e=D(n);return function(n){return e(t,n)}}for(var o,u=r.entries();!(o=u.next()).done;){var i=o.value,c=i[0],f=i[1];if(n.equals(c,t))return p([c,f])}return s}}var Y=function(n,t){return function(n,t){for(var r,e=new Map,o=n.entries();!(r=o.next()).done;){var u=r.value,i=u[0],c=u[1];e.set(i,t(i,c))}return e}(n,(function(n,r){return t(r)}))};function q(n){return u(w,n.of)}q({URI:"Task",of:function(n){return function(){return Promise.resolve(n)}}})([]);var B=function(n){return n.length>0},$=function(n,t,r){if(r[n]===t)return r;var e=function(n){return f([n[0]],n.slice(1))}(r);return e[n]=t,e},J={equals:function(n,t){return n===t}},W={equals:J.equals,compare:function(n,t){return n<t?-1:n>t?1:0}},H=function(n){return 0===n.length},Q=i,V=function(n,t){return{_tag:"Concat",left:n,right:t}};function X(){return{concat:V}}var Z={is:function(n){return"string"==typeof n}},nn={is:function(n){return"boolean"==typeof n}};var tn=X(),rn={URI:"Either",_E:void 0,map:function(n,t){return Q(n,function(n){return function(t){return F(t)?t:w(n(t.right))}}(t))},ap:function(n,t){return F(n)?F(t)?O(tn.concat(n.left,t.left)):n:F(t)?t:w(n.right(t.right))},of:w,chain:function(n,t){return Q(n,S(t))},throwError:O,bimap:function(n,t,r){return Q(n,function(n,t){return function(r){return F(r)?O(n(r.left)):w(t(r.right))}}(t,r))},mapLeft:function(n,t){return Q(n,function(n){return function(t){return F(t)?O(n(t.left)):t}}(t))},alt:function(n,t){if(_(n))return n;var r=t();return F(r)?O(tn.concat(n.left,r.left)):r}},en=function(n,t){return function(n,t){return function(n){return function(t,r){return{decode:function(e){return t(e)?n.of(e):n.throwError(r(e))}}}}(rn)(n,(function(n){return{_tag:"Of",value:function(n,t){return{_tag:"Leaf",actual:n,error:t}}(n,t)}}))}(n.is,t)},on=en(Z,"string"),un=en(nn,"boolean"),cn=B,fn=function(n,t){return n<0||n>=t.length};function an(n,t){return void 0===t?function(t){return an(n,t)}:fn(n,t)?s:p(t[n])}var sn=function(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(r);return s}};function pn(n){return function(t){for(var r=0;r<t.length;r++)if(n(t[r]))return p(t[r]);return s}}var ln=function(n,t,r){return cn(r)?$(n,t,r):r},mn=function(n){return[n]},vn=r;function hn(n){var t,r=(t=n,{URI:gn,_E:void 0,map:dn,ap:function(n,r){return vn(t.concat(n,r))}});return{URI:gn,_E:void 0,map:r.map,ap:r.ap,of:function(){return vn(n.empty)}}}var dn=function(n,t){return i(n,yn(t))},yn=function(){return r},gn="Const",On={concat:function(n,t){return n&&t},empty:!0},wn={concat:function(n,t){return n||t},empty:!1},Sn=function(n){return function(t){return Object.keys(t).sort(n.compare)}};function Fn(n,t){return void 0===t?function(t){return Fn(n,t)}:h.call(t,n)?p(t[n]):s}var _n={};function Pn(n){return function(t){var r={};for(var e in t)h.call(t,e)&&(r[e]=n(e,t[e]));return r}}function bn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return bn(W).apply(void 0,n);var r=Sn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length,c=0;c<i;c++){var f=u[c];o=t(f,o,e[f])}return o}}}function En(n){if("compare"in n){var t=Sn(n);return function(n){return function(r){return function(e){for(var o=n.empty,u=t(e),i=u.length,c=0;c<i;c++){var f=u[c];o=n.concat(o,r(f,e[f]))}return o}}}}return En(W)(n)}function Nn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(2===n.length)return Nn(W).apply(void 0,n);var r=Sn(n[0]);return function(n,t){return function(e){for(var o=n,u=r(e),i=u.length-1;i>=0;i--){var c=u[i];o=t(c,e[c],o)}return o}}}function xn(n){return Rn(W)(n)}var jn=function(n,t){return i(n,function(n){return Pn((function(t,r){return n(r)}))}(t))},Gn=function(n){var t=Kn(n);return function(n,r,e){return i(n,t(r,e))}},Mn=function(n){return function(t){var r=Cn(n)(t);return function(n,t){return i(n,r(t))}}},kn=function(n){var t=zn(n);return function(n,r,e){return i(n,t(r,e))}},In=function(n){var t=bn(n);return function(n,r,e){return i(n,t(r,e))}},Tn=function(n){var t=En(n);return function(n){var r=t(n);return function(n,t){return i(n,r(t))}}},Ln=function(n){var t=Nn(n);return function(n,r,e){return i(n,t(r,e))}},An=function(n){var t=Un(n);return function(n){var r=t(n);return function(n,t){return r(n,u(c,t))}}},Rn=function(n){var r=An(n);return function(n){var e=r(n);return function(n){return e(n,t)}}},Un=function(n){return function(t){var r=Sn(n);return function(n,e){var o=r(n);if(0===o.length)return t.of(_n);for(var u=t.of({}),i=function(r){u=t.ap(t.map(u,(function(n){return function(t){return n[r]=t,n}})),e(r,n[r]))},c=0,f=o;c<f.length;c++){i(f[c])}return u}}};function Kn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=bn(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return Kn(W).apply(void 0,n)}function Cn(n){if("compare"in n){var t=En(n);return function(n){var r=t(n);return function(n){return r((function(t,r){return n(r)}))}}}return Cn(W)(n)}function zn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(1===n.length){var r=Nn(n[0]);return function(n,t){return r(n,(function(n,r,e){return t(r,e)}))}}return zn(W).apply(void 0,n)}var Dn=function(n){var t={};for(var r in n)if(h.call(n,r)){var e=n[r];a(e)&&(t[r]=e.value)}return t},Yn=function(n){var t={},r={};for(var e in n)if(h.call(n,e)){var o=n[e];l(o)?t[e]=o.left:r[e]=o.right}return d(t,r)},qn="ReadonlyRecord",Bn={URI:qn,compact:Dn,separate:Yn};Gn(W),Mn(W),kn(W),Gn(W),Mn(W),kn(W),In(W),Tn(W),Ln(W);var $n={URI:qn,map:jn,reduce:Gn(W),foldMap:Mn(W),reduceRight:kn(W),traverse:An(W),sequence:xn};Gn(W),Mn(W),kn(W),In(W),Tn(W),Ln(W),An(W),Un(W);g($n,Bn),y($n,Bn);Gn(W),Mn(W),kn(W),An(W);var Jn=function(n,t){return function(r){if(h.call(r,n)&&r[n]===t)return r;var e=Object.assign({},r);return e[n]=t,e}};Gn(W),Mn(W),kn(W),An(W),In(W),Tn(W),Ln(W),Un(W);var Wn=function(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;var e=Array(n),o=0;for(t=0;t<r;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e},Hn=function(n){return Qn(n.get,u(n.reverseGet,e))},Qn=function(n,t){return{get:n,set:t}},Vn=function(n){return at(u(n.get,E),n.set)},Xn=function(n){return function(t){return Qn((function(r){return n.get(t.get(r))}),(function(r){return function(e){return t.set(n.set(r)(t.get(e)))(e)}}))}},Zn=function(n,t){return{getOption:n,reverseGet:t}},nt=function(n){return at(n.getOption,(function(t){return et(t)(n)}))},tt=function(n){return vt((function(t){return function(r){return function(e){return Q(n.getOption(e),A((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return et(t)(n)(e)}))})))}}}))},rt=function(n){return function(t){var r=function(n){return function(t){return function(r){return Q(t.getOption(r),G((function(e){var o=n(e);return o===e?r:t.reverseGet(o)})))}}}(n)(t);return function(n){return Q(r(n),R((function(){return n})))}}},et=function(n){return rt((function(){return n}))},ot=function(){return Zn(U,t)},ut=function(n){return Zn(N(n),t)},it=function(){return Zn(t,E)},ct=function(){return Zn(I,w)},ft=function(){return Zn((function(n){return F(n)?E(n.left):b}),O)},at=function(n,t){return{getOption:n,set:t}},st=function(n){return function(t){return function(r){return Q(t.getOption(r),G((function(e){var o=n(e);return o===e?r:t.set(o)(r)})))}}},pt=function(n){return function(t){var r=st(n)(t);return function(n){return Q(r(n),R((function(){return n})))}}},lt=function(n){return function(t){return at(u(t.getOption,M(n.getOption)),(function(r){return pt(n.set(r))(t)}))}},mt=function(n,t,r){if(r[n]===t)return r;var e=Wn([r[0]],r.slice(1));return e[n]=t,e},vt=function(n){return{modifyF:n}};function ht(n){return function(t){return vt((function(r){return function(e){return t.modifyF(r)(n.modifyF(r)(e))}}))}}var dt={URI:"Identity",map:function(n,t){return t(n)},of:t,ap:function(n,t){return n(t)}};function yt(n){return ht(function(n){return function(){return vt((function(t){var r=function(n){return"Identity"===n.URI}(t)?n.map:n.traverse(t);return function(n){return function(t){return r(t,n)}}}))}}(n)())}var gt=function(n){return{index:n}},Ot=function(){return gt((function(n){return at((function(t){return an(n,t)}),(function(t){return function(r){return Q(an(n,r),A((function(){return r}),(function(){return ln(n,t,r)})))}}))}))},wt=function(){return gt((function(n){return at((function(t){return an(n,t)}),(function(t){return function(r){return Q(an(n,r),A((function(){return r}),(function(){return mt(n,t,r)})))}}))}))},St=function(){return gt((function(n){return at((function(t){return Fn(n,t)}),(function(t){return function(r){return r[n]===t||L(Fn(n,r))?r:Jn(n,t)(r)}}))}))};var Ft=Hn,_t=function(n){return Zn(u(n.get,E),n.reverseGet)},Pt=function(n){return at(u(n.get,E),u(n.reverseGet,e))},bt=function(n){return vt((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.reverseGet(t)}))}}}))},Et=Qn,Nt=function(){return Qn(t,e)},xt=Vn,jt=function(n){return vt((function(t){return function(r){return function(e){return t.map(r(n.get(e)),(function(t){return n.set(t)(e)}))}}}))},Gt=Xn,Mt=Gt,kt=u(Hn,Gt),It=function(n){return function(t){return lt(nt(n))(Vn(t))}},Tt=function(n){return u(xt,lt(n))},Lt=function(n){return function(t){return function(r){var e=t.get(r),o=n(e);return e===o?r:t.set(o)(r)}}};var At=function(n){return function(t){return Qn((function(r){return t.get(r)[n]}),(function(r){return function(e){var o,u=t.get(e);return r===u[n]?e:t.set(Object.assign({},u,((o={})[n]=r,o)))(e)}}))}},Rt=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return Qn((function(r){for(var e=t.get(r),o={},u=0,i=n;u<i.length;u++){var c=i[u];o[c]=e[c]}return o}),(function(r){return function(e){for(var o=t.get(e),u=0,i=n;u<i.length;u++){var c=i[u];if(r[c]!==o[c])return t.set(Object.assign({},o,r))(e)}return e}}))}},Ut=function(n){return function(t){return Qn((function(r){return t.get(r)[n]}),(function(r){return function(e){var o=t.get(e);if(r===o[n])return e;var u=o.slice();return u[n]=r,t.set(u)(e)}}))}},Kt=function(n){return function(t){return Q(t,Xn(function(n){return{at:n}}((function(n){return Qn((function(t){return Fn(n,t)}),A((function(){return t=n,function(n){if(!h.call(n,t))return n;var r=Object.assign({},n);return delete r[t],r};var t}),(function(t){return Jn(n,t)})))})).at(n)))}},Ct=It(it()),zt=It(ct()),Dt=It(ft());var Yt=function(n,t,r){return Et(u(n.get,t),u(r,n.set))},qt="monocle-ts/Lens",Bt={URI:qt,imap:Yt},$t={URI:qt,compose:function(n,t){return Gt(n)(t)}},Jt={URI:qt,compose:$t.compose,id:Nt},Wt=Object.freeze({__proto__:null,lens:Et,id:Nt,asOptional:xt,asTraversal:jt,compose:Gt,composeLens:Mt,composeIso:kt,composePrism:It,composeOptional:Tt,composeTraversal:function(n){return u(jt,ht(n))},modify:Lt,modifyF:function(n){return function(t){return function(r){return function(e){return Q(r.get(e),t,(function(t){return n.map(t,(function(n){return r.set(n)(e)}))}))}}}},fromNullable:function(n){return It(ot())(n)},filter:function(n){return It(ut(n))},prop:At,props:Rt,component:Ut,index:function(n){return u(xt,function(n){return function(t){return Q(t,lt(Ot().index(n)))}}(n))},indexNonEmpty:function(n){return u(xt,function(n){return function(t){return Q(t,lt(wt().index(n)))}}(n))},key:function(n){return u(xt,function(n){return function(t){return Q(t,lt(St().index(n)))}}(n))},atKey:Kt,some:Ct,right:zt,left:Dt,traverse:function(n){return u(jt,yt(n))},findFirst:function(n){return Tt(function(n){return at(pn(n),(function(t){return function(r){return Q(sn(n)(r),A((function(){return r}),(function(n){return ln(n,t,r)})))}}))}(n))},findFirstNonEmpty:function(n){return Tt(function(n){return at(pn(n),(function(t){return function(r){return Q(sn(n)(r),A((function(){return r}),(function(n){return mt(n,t,r)})))}}))}(n))},imap:function(n,t){return function(r){return Yt(r,n,t)}},URI:qt,Invariant:Bt,Semigroupoid:$t,Category:Jt}),Ht=function(n){return vt((function(t){return function(r){return function(e){return Q(n.getOption(e),A((function(){return t.of(e)}),(function(o){return t.map(r(o),(function(t){return n.set(t)(e)}))})))}}}))},Qt=lt,Vt=st,Xt=pt;nt(ot()),nt(it()),nt(ct()),nt(ft());var Zt=ut,nr=nt,tr=tt,rr=function(n){return function(t){return Zn(u(t.getOption,M(n.getOption)),u(n.reverseGet,t.reverseGet))}},er=function(n){return function(t){return lt(Vn(n))(nt(t))}},or=ht,ur=function(n){return function(t){return t.modifyF(dt)(n)}};var ir=function(n){return new pr(n.get,n.set)},cr=function(n){return new lr(n.getOption,n.reverseGet)},fr=function(n){return new vr(n.getOption,n.set)},ar=function(n){return new hr(n.modifyF)},sr=function(n,t,r){var e;return r===n[t]?n:Object.assign({},n,((e={})[t]=r,e))},pr=function(){function n(n,t){this.get=n,this.set=t,this._tag="Lens"}return n.fromPath=function(){var t=n.fromProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromProp=function(){return function(n){return ir(Q(Nt(),At(n)))}},n.fromProps=function(){return function(n){return ir(Q(Nt(),Rt.apply(Wt,n)))}},n.fromNullableProp=function(){return function(t,r){return new n((function(n){var e=U(n[t]);return L(e)?r:e.value}),(function(n){return function(r){return sr(r,t,n)}}))}},n.prototype.modify=function(n){return Lt(n)(this)},n.prototype.asOptional=function(){return fr(xt(this))},n.prototype.asTraversal=function(){return ar(jt(this))},n.prototype.asSetter=function(){var n=this;return new gr((function(t){return n.modify(t)}))},n.prototype.asGetter=function(){var n=this;return new dr((function(t){return n.get(t)}))},n.prototype.asFold=function(){var n=this;return new yr((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(n){return ir(Gt(n)(this))},n.prototype.composeLens=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.asGetter().compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeOptional=function(n){return fr(Q(this,xt,Qt(n)))},n.prototype.composeTraversal=function(n){return ar(Q(this,jt,or(n)))},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return ir(Q(this,Gt(Q(n,Ft))))},n.prototype.composePrism=function(n){return fr(It(n)(this))},n}(),lr=function(){function n(n,t){this.getOption=n,this.reverseGet=t,this._tag="Prism"}return n.fromPredicate=function(n){return cr(Zt(n))},n.some=function(){return mr},n.prototype.modify=function(n){var t=this;return function(r){var e=t.modifyOption(n)(r);return L(e)?r:e.value}},n.prototype.modifyOption=function(n){var t=this;return function(r){return K(t.getOption(r),(function(e){var o=n(e);return o===e?r:t.reverseGet(o)}))}},n.prototype.set=function(n){return this.modify((function(){return n}))},n.prototype.asOptional=function(){return fr(nr(this))},n.prototype.asTraversal=function(){return ar(tr(this))},n.prototype.asSetter=function(){var n=this;return new gr((function(t){return n.modify(t)}))},n.prototype.asFold=function(){var n=this;return new yr((function(t){return function(r){return function(e){var o=n.getOption(e);return L(o)?t.empty:r(o.value)}}}))},n.prototype.compose=function(n){return cr(rr(n)(this))},n.prototype.composePrism=function(n){return this.compose(n)},n.prototype.composeOptional=function(n){return fr(Q(this,nr,Qt(n)))},n.prototype.composeTraversal=function(n){return ar(Q(this,tr,or(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeIso=function(n){return cr(Q(this,rr(Q(n,_t))))},n.prototype.composeLens=function(n){return fr(er(n)(this))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),mr=new lr(t,E),vr=function(){function n(n,t){this.getOption=n,this.set=t,this._tag="Optional"}return n.fromPath=function(){var t=n.fromNullableProp();return function(n){var r=t(n[0]);return n.slice(1).reduce((function(n,r){return n.compose(t(r))}),r)}},n.fromNullableProp=function(){return function(t){return new n((function(n){return U(n[t])}),(function(n){return function(r){return null==r[t]?r:sr(r,t,n)}}))}},n.fromOptionProp=function(){var n=pr.fromProp();return function(t){return n(t).composePrism(mr)}},n.prototype.modify=function(n){return Xt(n)(this)},n.prototype.modifyOption=function(n){return Vt(n)(this)},n.prototype.asTraversal=function(){return ar(Ht(this))},n.prototype.asFold=function(){var n=this;return new yr((function(t){return function(r){return function(e){var o=n.getOption(e);return L(o)?t.empty:r(o.value)}}}))},n.prototype.asSetter=function(){var n=this;return new gr((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return fr(Qt(n)(this))},n.prototype.composeOptional=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return ar(Q(this,Ht,or(n)))},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeLens=function(n){return fr(Q(this,Qt(Q(n,xt))))},n.prototype.composePrism=function(n){return fr(Q(this,Qt(Q(n,nr))))},n.prototype.composeIso=function(n){return fr(Q(this,Qt(Q(n,Pt))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),hr=function(){function n(n){this.modifyF=n,this._tag="Traversal"}return n.prototype.modify=function(n){return ur(n)(this)},n.prototype.set=function(n){return function(n){return ur((function(){return n}))}(n)(this)},n.prototype.filter=function(n){return ar(function(n){return or(tt(ut(n)))}(n)(this))},n.prototype.asFold=function(){var n=this;return new yr((function(t){return function(r){return n.modifyF(hn(t))((function(n){return vn(r(n))}))}}))},n.prototype.asSetter=function(){var n=this;return new gr((function(t){return n.modify(t)}))},n.prototype.compose=function(n){return ar(or(n)(this))},n.prototype.composeTraversal=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeSetter=function(n){return this.asSetter().compose(n)},n.prototype.composeOptional=function(n){return this.compose(n.asTraversal())},n.prototype.composeLens=function(n){return ar(Q(this,or(Q(n,jt))))},n.prototype.composePrism=function(n){return ar(Q(this,or(Q(n,tr))))},n.prototype.composeIso=function(n){return ar(Q(this,or(Q(n,bt))))},n.prototype.composeGetter=function(n){return this.asFold().compose(n.asFold())},n}(),dr=function(){function n(n){this.get=n,this._tag="Getter"}return n.prototype.asFold=function(){var n=this;return new yr((function(){return function(t){return function(r){return t(n.get(r))}}}))},n.prototype.compose=function(t){var r=this;return new n((function(n){return t.get(r.get(n))}))},n.prototype.composeGetter=function(n){return this.compose(n)},n.prototype.composeFold=function(n){return this.asFold().compose(n)},n.prototype.composeLens=function(n){return this.compose(n.asGetter())},n.prototype.composeIso=function(n){return this.compose(n.asGetter())},n.prototype.composeTraversal=function(n){return this.asFold().compose(n.asFold())},n.prototype.composeOptional=function(n){return this.asFold().compose(n.asFold())},n.prototype.composePrism=function(n){return this.asFold().compose(n.asFold())},n}(),yr=function(){function n(n){this.foldMap=n,this._tag="Fold",this.getAll=n({concat:function(n,t){return n.concat(t)},empty:[]})(mn),this.exist=n(wn),this.all=n(On),this.foldMapFirst=n(C())}return n.prototype.compose=function(t){var r=this;return new n((function(n){return function(e){return r.foldMap(n)(t.foldMap(n)(e))}}))},n.prototype.composeFold=function(n){return this.compose(n)},n.prototype.composeGetter=function(n){return this.compose(n.asFold())},n.prototype.composeTraversal=function(n){return this.compose(n.asFold())},n.prototype.composeOptional=function(n){return this.compose(n.asFold())},n.prototype.composeLens=function(n){return this.compose(n.asFold())},n.prototype.composePrism=function(n){return this.compose(n.asFold())},n.prototype.composeIso=function(n){return this.compose(n.asFold())},n.prototype.find=function(n){return this.foldMapFirst(N(n))},n.prototype.headOption=function(n){return this.find((function(){return!0}))(n)},n}(),gr=function(){function n(n){this.modify=n,this._tag="Setter"}return n.prototype.set=function(n){return this.modify(e(n))},n.prototype.compose=function(t){var r=this;return new n((function(n){return r.modify(t.modify(n))}))},n.prototype.composeSetter=function(n){return this.compose(n)},n.prototype.composeTraversal=function(n){return this.compose(n.asSetter())},n.prototype.composeOptional=function(n){return this.compose(n.asSetter())},n.prototype.composeLens=function(n){return this.compose(n.asSetter())},n.prototype.composePrism=function(n){return this.compose(n.asSetter())},n.prototype.composeIso=function(n){return this.compose(n.asSetter())},n}(),Or={},wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.AnonymousSelect=wr.NamedSelect=wr.Not=wr.Guard=wr.PatternKind=void 0,wr.PatternKind=Symbol("@ts-pattern/pattern-kind"),wr.Guard=Symbol("@ts-pattern/guard"),wr.Not=Symbol("@ts-pattern/not"),wr.NamedSelect=Symbol("@ts-pattern/named-select"),wr.AnonymousSelect=Symbol("@ts-pattern/anonymous-select");var Sr={};!function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instanceOf=n.select=n.ANONYMOUS_SELECT_KEY=n.not=n.when=void 0;const t=wr;n.when=n=>({[t.PatternKind]:t.Guard,[t.Guard]:n});n.not=n=>({[t.PatternKind]:t.Not,[t.Not]:n}),n.ANONYMOUS_SELECT_KEY="@ts-pattern/__anonymous-select-key",n.select=function(n){return void 0===n?{[t.PatternKind]:t.AnonymousSelect}:{[t.PatternKind]:t.NamedSelect,[t.NamedSelect]:n}};n.instanceOf=t=>n.when(function(n){return t=>t instanceof n}(t))}(Sr);var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.__=void 0;const _r=Sr;const Pr=_r.when((function(n){return!0})),br=_r.when((function(n){return"string"==typeof n})),Er=_r.when((function(n){return"number"==typeof n&&!Number.isNaN(n)})),Nr=_r.when((function(n){return"boolean"==typeof n})),xr=_r.when((function(n){return null==n}));Fr.__=Object.assign(Pr,{string:br,number:Er,boolean:Nr,nullish:xr}),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isMatching=n.match=n.instanceOf=n.select=n.not=n.when=n.__=void 0;const t=wr,r=Sr;Object.defineProperty(n,"when",{enumerable:!0,get:function(){return r.when}}),Object.defineProperty(n,"not",{enumerable:!0,get:function(){return r.not}}),Object.defineProperty(n,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(n,"instanceOf",{enumerable:!0,get:function(){return r.instanceOf}});const e=Fr;Object.defineProperty(n,"__",{enumerable:!0,get:function(){return e.__}});n.match=n=>o(n,[]);const o=(n,t)=>{const e=()=>{const r=t.find((({test:t})=>t(n)));if(!r){let t;try{t=JSON.stringify(n)}catch(r){t=n}throw new Error(`Pattern matching error: no pattern matches value ${t}`)}return r.handler(r.select(n),n)};return{with(...e){const u=e[e.length-1],c=[],f=[];for(let n=0;n<e.length-1;n++){const t=e[n];"function"==typeof t?f.push(t):c.push(t)}let a={};return o(n,t.concat([{test:n=>Boolean(c.some((t=>i(t,n,((n,t)=>{a[n]=t}))))&&f.every((t=>t(n)))),handler:u,select:n=>Object.keys(a).length?void 0!==a[r.ANONYMOUS_SELECT_KEY]?a[r.ANONYMOUS_SELECT_KEY]:a:n}]))},when:(r,e)=>o(n,t.concat([{test:r,handler:e,select:n=>n}])),otherwise:r=>o(n,t.concat([{test:()=>!0,handler:r,select:n=>n}])).run(),exhaustive:()=>e(),run:e}},u=n=>Boolean(n&&"object"==typeof n),i=(n,o,c)=>{if(u(n)){if((f=n)&&f[t.PatternKind]===t.Guard)return Boolean(n[t.Guard](o));if((n=>n&&n[t.PatternKind]===t.NamedSelect)(n))return c(n[t.NamedSelect],o),!0;if((n=>n&&n[t.PatternKind]===t.AnonymousSelect)(n))return c(r.ANONYMOUS_SELECT_KEY,o),!0;if((n=>n&&n[t.PatternKind]===t.Not)(n))return!i(n[t.Not],o,c);if(!u(o))return!1;if(Array.isArray(n)){if(!Array.isArray(o))return!1;if(1===n.length){const t={},r=(n,r)=>{t[n]=(t[n]||[]).concat([r])},e=o.every((t=>i(n[0],t,r)));return e&&Object.keys(t).forEach((n=>c(n,t[n]))),e}return n.length===o.length&&n.every(((n,t)=>i(n,o[t],c)))}if(n instanceof Map)return o instanceof Map&&[...n.keys()].every((t=>i(n.get(t),o.get(t),c)));if(n instanceof Set){if(!(o instanceof Set))return!1;if(0===n.size)return 0===o.size;if(1===n.size){const[t]=[...n.values()];return Object.values(e.__).includes(t)?i([t],[...o.values()],c):o.has(t)}return[...n.values()].every((n=>o.has(n)))}return Object.keys(n).every((t=>t in o&&i(n[t],o[t],c)))}var f;return o===n};n.isMatching=function(...n){if(1===n.length){const[t]=n;return n=>i(t,n,(()=>{}))}if(2===n.length){const[t,r]=n;return i(t,r,(()=>{}))}throw new Error(`isMatching wasn't given enough arguments: expected 1 or 2, received ${n.length}.`)}}(Or);var jr,Gr=function(n){return"boolean"==typeof n&&!n};!function(n){n.FormatterPath="hansjhoffman.nix.config.nixFormatPath",n.FormatOnSave="hansjhoffman.nix.config.formatOnSave",n.FormatDocument="hansjhoffman.nix.commands.formatDocument"}(jr||(jr={}));var Mr=function(n,t){var r,e,o=n.document.path;return r=function(){return new Promise((function(n,r){var e=new Process("/usr/bin/env",{args:[""+t,""+o]});e.onDidExit((function(t){return 0===t?n():r()})),e.start()}))},e=function(){return{_tag:"invokeFormatterError",reason:nova.localize("Failed to format the document")+"."}},function(){return r().then(v,(function(n){return m(e(n))}))}},kr={workspace:{formatOnSave:i(U(nova.workspace.config.get(jr.FormatOnSave)),M((function(n){return I(un.decode(n))}))),formatterPath:i(U(nova.workspace.config.get(jr.FormatterPath)),M((function(n){return I(on.decode(n))})),M(N((function(n){return Gr(H(n))}))))},global:{formatOnSave:i(U(nova.config.get(jr.FormatOnSave)),M((function(n){return I(un.decode(n))}))),formatterPath:i(U(nova.config.get(jr.FormatterPath)),M((function(n){return I(on.decode(n))})),M(N((function(n){return Gr(H(n))}))))}},Ir=pr.fromPath()(["workspace"]),Tr=pr.fromPath()(["global"]),Lr=new CompositeDisposable,Ar=new Map,Rr=function(n){var t=Ir.get(n),r=Tr.get(n);return T(t.formatOnSave)||T(r.formatOnSave)},Ur=function(n){i(U(n.document.syntax),M(N((function(n){return J.equals(n,"nix")}))),A(o,(function(t){Ar=z(J)(n.document.uri,n.onWillSave(Cr))(Ar)})))},Kr=function(){var n;i(Ar,(n=function(n){return n.dispose()},function(t){return Y(t,n)})),Ar=new Map},Cr=function(n){i(function(n){var t=Ir.get(n),r=Tr.get(n);return i(t.formatterPath,k((function(){return r.formatterPath})))}(kr),A((function(){return console.log(nova.localize("Skipping")+"... "+nova.localize("No formatter set")+".")}),(function(t){Mr(n,t)().then(P((function(n){return Or.match(n).with({_tag:"invokeFormatterError"},(function(n){var t=n.reason;return console.error(t)})).exhaustive()}),(function(){return console.log(nova.localize("Formatted")+" "+n.document.path)})))})))};exports.activate=function(){console.log(nova.localize("Activating")+"..."),function(n){if(nova.inDevMode()){var t=new NotificationRequest("nix-nova-notification");t.title=nova.extension.name,t.body=n,nova.notifications.add(t)}}(nova.localize("Starting extension")+"..."),Lr.add(nova.workspace.onDidAddTextEditor((function(n){Rr(kr)&&Ur(n)}))),Lr.add(nova.commands.register(jr.FormatDocument,Cr)),Lr.add(nova.workspace.config.onDidChange(jr.FormatterPath,(function(t,r){kr=Ir.modify((function(r){return n(n({},r),{formatterPath:I(on.decode(t))})}))(kr),Rr(kr)&&(Kr(),nova.workspace.textEditors.forEach(Ur))}))),Lr.add(nova.workspace.config.onDidChange(jr.FormatOnSave,(function(t,r){kr=Ir.modify((function(r){return n(n({},r),{formatOnSave:I(un.decode(t))})}))(kr);var e=Rr(kr);Kr(),e&&nova.workspace.textEditors.forEach(Ur)}))),Lr.add(nova.config.onDidChange(jr.FormatterPath,(function(t,r){kr=Tr.modify((function(r){return n(n({},r),{formatterPath:I(on.decode(t))})}))(kr),Rr(kr)&&(Kr(),nova.workspace.textEditors.forEach(Ur))}))),Lr.add(nova.config.onDidChange(jr.FormatOnSave,(function(t,r){kr=Tr.modify((function(r){return n(n({},r),{formatOnSave:I(un.decode(t))})}))(kr);var e=Rr(kr);Kr(),e&&nova.workspace.textEditors.forEach(Ur)}))),console.log(nova.localize("Activated")+" ðŸŽ‰")},exports.deactivate=function(){console.log(nova.localize("Deactivating")+"..."),Kr(),Lr.dispose()};
//# sourceMappingURL=main.cjs.min.js.map
